<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>로그인 상태</title>
</head>
<body>
    <div id="result"></div>

    <script type="text/javascript">
        // 세션 스토리지에서 토큰을 읽어옴
        const token = sessionStorage.getItem('token');

        if (token) {
            console.log('세션에서 읽은 토큰:', token);

            // 토큰을 화면에 표시
            document.getElementById('result').innerHTML = `
                <p>로그인 성공!</p>
                <p>토큰: ${token}</p>
            `;

            // 서버로 GET 요청 보내기
            fetch(`http://localhost:8080/goods/cart?token=${token}&count=10&page=1`, {  
                method: 'GET',
            })
            .then(response => response.json())
            .then(data => {
                console.log('서버 응답:', data);

                // 응답 데이터 처리 (예: 화면에 표시)
                if (data.code === 200) {
                    document.getElementById('result').innerHTML += `
                        <p>상품 데이터:</p>
                        <pre>${JSON.stringify(data.data, null, 2)}</pre>
                    `;
                } else {
                    // 서버 요청 실패 시, 오류 메시지를 표시
                    if (data.msg === '카카오 API 오류') {
                        document.getElementById('result').innerHTML += `
                            <p>카카오 API 요청 실패: 토큰을 확인해주세요.</p>
                        `;
                    } else if (data.msg === 'DB 쿼리 오류') {
                        document.getElementById('result').innerHTML += `
                            <p>DB 요청 실패: 서버에서 데이터를 가져오는 데 문제가 발생했습니다.</p>
                        `;
                    } else {
                        document.getElementById('result').innerHTML += `
                            <p>서버 요청 실패: ${data.msg}</p>
                        `;
                    }
                }
            })
            .catch(err => {
                console.error('서버 요청 실패:', err);
                document.getElementById('result').innerHTML += `
                    <p>서버 요청 실패: ${err.message}</p>
                `;
            });
        } else {
            console.log('토큰이 없습니다.');
            document.getElementById('result').innerHTML = `
                <p>로그인 정보가 없습니다.</p>
            `;
        }
    </script>
</body>
</html>
 next page.html